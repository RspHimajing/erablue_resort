;----------------------------------------------------------------------------------
;アビリティ１処理
;----------------------------------------------------------------------------------	
@固有アビ_3189_1(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 攻撃力上昇値
#DIM クリダメ上昇値
#DIM クリ率上昇値
#DIM 発動回数
#DIM 隊列番号
#DIM CTNOW

CTNOW = 0
隊列番号 = キャラ隊列検索(キャラ番号)

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 20
	アビ名 = 萩の束 B＋＋
	消費ＭＰ = 55
	攻撃力上昇値 = 30
	クリダメ上昇値 = 50
	クリ率上昇値 = 40
	発動回数 = 3
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 15
	アビ名 = 萩の束 B＋
	消費ＭＰ = 45
	攻撃力上昇値 = 25
	クリダメ上昇値 = 40
	クリ率上昇値 = 30
	発動回数 = 2
ELSEIF 1
	アビ名 = 萩の束 B
	消費ＭＰ = 30
	攻撃力上昇値 = 20
	クリダメ上昇値 = 30
	クリ率上昇値 = 20
	発動回数 = 1
ENDIF

SIF 隊列番号 > -1 && 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + 1)
	アビテンプレート用_アビ封印用フラグ = 1

SELECTCASE RAND:4
CASE 0
	アビ汎用文字列:実行時メッセージ１ = 「嗚呼。聞こえるよ……」
CASE 1
	アビ汎用文字列:実行時メッセージ１ = 「元気なら、それでいいさ」
CASE 2
	アビ汎用文字列:実行時メッセージ１ = 「こういうの、好きなのかい？」
CASEELSE
	アビ汎用文字列:実行時メッセージ１ = 「愛の力でパワーアップだ！」
ENDSELECT

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}
		詳細文文字列受け渡し変数 += @"<br>味方単体に［{攻撃力上昇値}％］（独自枠・3ターン）の攻撃力上昇効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>［{クリダメ上昇値}％］（独自枠・3ターン）のクリティカルダメージ率上昇効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>ランダムな味方{発動回数}体に［{クリ率上昇値}％］（独自枠・3ターン・消去不可）のクリティカル率上昇効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>使用後1ターン使用不能"
		詳細文文字列受け渡し変数 += @"　　　　このアビリティでは行動回数を消費しない。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		アビテンプレート用_行動消費無しフラグ = 1

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方単体
		アビ汎用文字列:バフ・デバフ枠 = 萩の束
		アビ汎用文字列:バフ・デバフ対象能力 = 萩の束
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 萩の束_攻撃力
		アビ汎用文字列:バフ・デバフ対象能力 = 攻撃力
		アビ汎用変数:効果割合 = 攻撃力上昇値
		CALL アビテンプレート_有利効果_付随バフ効果セット("萩の束")

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 萩の束_クリダメ率
		アビ汎用文字列:バフ・デバフ対象能力 = クリティカルダメージ率
		アビ汎用変数:効果割合 = クリダメ上昇値
		CALL アビテンプレート_有利効果_付随バフ効果セット("萩の束")

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方ランダムＸ体_重複無し(発動回数)
		アビ汎用文字列:バフ・デバフ枠 = 萩の束_クリ率
		アビ汎用文字列:バフ・デバフ対象能力 = クリティカル率
		アビ汎用変数:効果量 = クリ率上昇値
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット

		戦闘中カウント:隊列番号:CTNOW = 現在ターン数
ENDSELECT

;----------------------------------------------------------------------------------
;アビリティ２処理
;----------------------------------------------------------------------------------	
@固有アビ_3189_2(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM ゲージ上昇量
#DIM 与ダメージ上昇量
#DIM 高揚上昇量
#DIM 隊列番号
#DIM CTNOW

CTNOW = 1
隊列番号 = キャラ隊列検索(キャラ番号)

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 45
	アビ名 = 犀竜の湖 B＋＋
	消費ＭＰ = 65
	ゲージ上昇量 = 30
	与ダメージ上昇量 = 30
	高揚上昇量 = 20
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
	アビ名 = 犀竜の湖 B＋
	消費ＭＰ = 55
	ゲージ上昇量 = 25
	与ダメージ上昇量 = 25
	高揚上昇量 = 20
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 10
	アビ名 = 犀竜の湖 B
	消費ＭＰ = 45
	ゲージ上昇量 = 20
	与ダメージ上昇量 = 20
	高揚上昇量 = 20
ENDIF

SIF 隊列番号 > -1 && 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + 1)
	アビテンプレート用_アビ封印用フラグ = 1

SELECTCASE RAND:4
CASE 0
	アビ汎用文字列:実行時メッセージ１ = 「嗚呼。聞こえるよ……」
CASE 1
	アビ汎用文字列:実行時メッセージ１ = 「元気なら、それでいいさ」
CASE 2
	アビ汎用文字列:実行時メッセージ１ = 「こういうの、好きなのかい？」
CASEELSE
	アビ汎用文字列:実行時メッセージ１ = 「愛の力でパワーアップだ！」
ENDSELECT

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}
		詳細文文字列受け渡し変数 += @"<br>味方単体に［{ゲージ上昇量}％］（独自枠・3ターン）のゲージ上昇効率上昇効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>［{与ダメージ上昇量}％］（独自枠・3ターン）の与ダメージ上昇効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>［{高揚上昇量}］（独自枠・3ターン）の高揚上昇効果を与える。"
		詳細文文字列受け渡し変数 += @"<br>使用後1ターン使用不能"
		詳細文文字列受け渡し変数 += @"　　　　このアビリティでは行動回数を消費しない。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		アビテンプレート用_行動消費無しフラグ = 1

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方単体
		アビ汎用文字列:バフ・デバフ枠 = 犀竜の湖
		アビ汎用文字列:バフ・デバフ対象能力 = 犀竜の湖
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 犀竜の湖_ゲージ
		アビ汎用文字列:バフ・デバフ対象能力 = ゲージ上昇効率
		アビ汎用変数:効果割合 = ゲージ上昇量
		CALL アビテンプレート_有利効果_付随バフ効果セット("犀竜の湖")

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 犀竜の湖_与ダメージ
		アビ汎用文字列:バフ・デバフ対象能力 = 与ダメージ
		アビ汎用変数:効果割合 = 与ダメージ上昇量
		CALL アビテンプレート_有利効果_付随バフ効果セット("犀竜の湖")

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 犀竜の湖_高揚
		アビ汎用文字列:バフ・デバフ対象能力 = 高揚
		アビ汎用変数:効果量 = 高揚上昇量
		CALL アビテンプレート_有利効果_付随バフ効果セット("犀竜の湖")

		戦闘中カウント:隊列番号:CTNOW = 現在ターン数
ENDSELECT


;----------------------------------------------------------------------------------
;アビリティ３処理
;----------------------------------------------------------------------------------
@固有アビ_3189_3(ARGS, キャラ番号)
#DIM キャラ番号
#DIM 消費ＭＰ
#DIMS アビ名
#DIM 奥義ゲージ量
#DIM 弱体耐性
#DIM 隊列番号
#DIM CD
#DIM CTNOW

CTNOW = 2
隊列番号 = キャラ隊列検索(キャラ番号)

IF 基礎BATTLE_STATE:キャラ番号:Lv >= 55
	アビ名 = 三井の晩鐘 EX＋＋
	消費ＭＰ = 75
	奥義ゲージ量 = 30
	弱体耐性 = 100
	CD = 3
	LOCAL = 戦闘中カウント:隊列番号:CTNOW + CD - 現在ターン数
	SIF 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + CD)
		アビ名 += @" CT:{LOCAL}"
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 35
	アビ名 = 三井の晩鐘 EX＋
	消費ＭＰ = 50
	奥義ゲージ量 = 25
	弱体耐性 = 75
	CD = 3
	LOCAL = 戦闘中カウント:隊列番号:CTNOW + CD - 現在ターン数
	SIF 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + CD)
		アビ名 += @" CT:{LOCAL}"
ELSEIF 基礎BATTLE_STATE:キャラ番号:Lv >= 25
	アビ名 = 三井の晩鐘 EX
	消費ＭＰ = 35
	奥義ゲージ量 = 20
	弱体耐性 = 50
	CD = 3
	LOCAL = 戦闘中カウント:隊列番号:CTNOW + CD - 現在ターン数
	SIF 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + CD)
		アビ名 += @" CT:{LOCAL}"
ENDIF

SIF 隊列番号 > -1 && 戦闘中カウント:隊列番号:CTNOW != 0 && 現在ターン数 < (戦闘中カウント:隊列番号:CTNOW + CD)
	アビテンプレート用_アビ封印用フラグ = 1

SELECTCASE RAND:4
CASE 0
	アビ汎用文字列:実行時メッセージ１ = 「嗚呼。聞こえるよ……」
CASE 1
	アビ汎用文字列:実行時メッセージ１ = 「元気なら、それでいいさ」
CASE 2
	アビ汎用文字列:実行時メッセージ１ = 「こういうの、好きなのかい？」
CASEELSE
	アビ汎用文字列:実行時メッセージ１ = 「愛の力でパワーアップだ！」
ENDSELECT

SELECTCASE ARGS
	CASE "アビ名"
		TSTR:コマンド名受渡 = %アビ名%
	CASE "アビ説明文"
		詳細文文字列受け渡し変数 = 消費ＭＰ：{消費ＭＰ}
		詳細文文字列受け渡し変数 += @"<br>味方単体に［{奥義ゲージ量}］の奥義ゲージUP効果を付与。"
		詳細文文字列受け渡し変数 += @"<br>無敵状態［2回・3T］（独自枠）を付与。"
		詳細文文字列受け渡し変数 += @"<br>弱体耐性［{弱体耐性}％・3T］（独自枠）を付与。"
		詳細文文字列受け渡し変数 += @"<br>使用後{CD}ターン使用不能"
		詳細文文字列受け渡し変数 += @"　　　　このアビリティでは行動回数を消費しない。"
		RETURN 消費ＭＰ
	CASE "アビ効果"
		アビテンプレート用_行動消費無しフラグ = 1

		CALL アビ汎用変数文字列リセット
		CALL アビ対象選択テンプレート_味方単体
		アビ汎用変数:効果量 = 奥義ゲージ量
		CALL アビテンプレート_有利効果_奥義ゲージUP

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 三井の晩鐘
		アビ汎用文字列:バフ・デバフ対象能力 = 三井の晩鐘
		アビ汎用変数:持続ターン = 3
		CALL アビテンプレート_有利効果_バフ効果セット

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 三井の晩鐘_無敵
		アビ汎用文字列:バフ・デバフ対象能力 = 無敵
		アビ汎用変数:効果割合 = 100
		アビ汎用変数:持続回数 = 2
		CALL アビテンプレート_有利効果_付随バフ効果セット("三井の晩鐘")

		CALL アビ汎用変数文字列リセット
		アビ汎用文字列:バフ・デバフ枠 = 三井の晩鐘_弱体耐性
		アビ汎用文字列:バフ・デバフ対象能力 = 弱体耐性
		アビ汎用変数:効果割合 = 弱体耐性
		CALL アビテンプレート_有利効果_付随バフ効果セット("三井の晩鐘")

		戦闘中カウント:隊列番号:CTNOW = 現在ターン数
ENDSELECT


@固有バフ・デバフ処理_バフ_三井の晩鐘_無敵_被ダメージ(隊列番号, バフ・デバフ行数, ダメージ値)
#DIM 隊列番号
#DIM バフ・デバフ行数
#DIM ダメージ値

RETURN 0

;----------------------------------------------------------------------------------
;サポアビ
;----------------------------------------------------------------------------------
@固有戦闘開始時処理_キャラ_3189
;戦闘開始時処理関数から呼び出し
#DIM 蛇女房番号

蛇女房番号 = GETCHARA(3189)

;サポアビ１呼び出し処理
IF TALENT:蛇女房番号:妊娠
	アビテンプレート用_アビ名 = 母は強し_EX
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用変数:消去不可オプション = 1
	アビ汎用文字列:バフ・デバフ枠 = 母は強し_EX
	アビ汎用文字列:バフ・デバフ対象能力 = ガッツ
	アビ汎用変数:持続被ダメ回数 = 3
	CALL アビテンプレート_有利効果_バフ効果セット
ENDIF

IF 基礎BATTLE_STATE:蛇女房番号:Lv >= 15
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_自己のみ
	アビ汎用変数:持続ターン = -1
	アビ汎用変数:消去不可オプション = 1
	アビ汎用変数:特殊表示オプション = -1
	アビ汎用文字列:バフ・デバフ枠 = 家庭の味_A
	アビ汎用文字列:バフ・デバフ対象能力 = ゲージ上昇効率
	アビ汎用変数:効果割合 = 10
	CALL アビテンプレート_有利効果_バフ効果セット
ENDIF

IF 基礎BATTLE_STATE:蛇女房番号:Lv >= 30
	CALL アビ汎用変数文字列リセット
	CALL アビ対象選択テンプレート_味方全体_生者のみ_自己以外
	アビ汎用文字列:バフ・デバフ枠 = 子を想う母
	アビ汎用文字列:バフ・デバフ対象能力 = 子を想う母
	アビ汎用変数:持続ターン = -1
	アビ汎用変数:消去不可オプション = 1
	アビ汎用変数:特殊表示オプション = -1
	CALL アビテンプレート_有利効果_バフ効果セット

	CALL アビ汎用変数文字列リセット
	アビ汎用文字列:バフ・デバフ枠 = 子を想う母_弱体耐性
	アビ汎用文字列:バフ・デバフ対象能力 = 弱体耐性
	アビ汎用変数:効果割合 = 20
	CALL アビテンプレート_有利効果_付随バフ効果セット("子を想う母")
ENDIF


;--------------------------------------------------
;戦闘能力の固有処理説明
;--------------------------------------------------
@口上_ステータス画面_固有特性解説_4001(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

KSTR:(K++) = □ 特性：『母は強し EX』 □-----------------------------------------------------------------
KSTR:(K++) = 　妊娠中、戦闘開始時に自動でガッツ付与（3回）
KSTR:(K++) = 　

IF 基礎BATTLE_STATE:対象キャラ:Lv >= 15
	KSTR:(K++) = □ 特性：『家庭の味 A』 □-----------------------------------------------------------------
	KSTR:(K++) = 　自身の奥義ゲージ上昇効率をアップ（10％）
	KSTR:(K++) = 　
ENDIF

IF 基礎BATTLE_STATE:対象キャラ:Lv >= 30
	KSTR:(K++) = □ 特性：『子を想う母 EX』 □-----------------------------------------------------------------
	KSTR:(K++) = 　自身がフィールドにいる間、自身を除く味方全体の弱体耐性をアップ（20％）
	KSTR:(K++) = 　
ENDIF

CALL 口上変数表示(対象キャラ, 1)
