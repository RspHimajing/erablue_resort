;--------------------------------------------------
;ダンジョン探索中に条件を満たしていた時表示される文章
;--------------------------------------------------
;・使い方
;「1」をキャラクター番号に置換し、それぞれの関数に処理を入れる
;--------------------------------------------------

;--------------------------------------------------
;「仲間と会話」ボタン押下時
;簡単に何度も見られるので、条件分岐やランダム化で複数パターンの登録を推奨
;--------------------------------------------------
@KOJO_DUNGEON_仲間と会話_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化
LOCAL:1 = キャラ隊列検索(対象キャラ)
IF PLAYER == MASTER
	;相手があなたの時
	IF TALENT:対象キャラ:恋慕
		SELECTCASE RAND:6
			CASE 0
				WSTR:(K++) = 「……んっ、ちょっと胸がズレちゃったわ……」
				KSTR:(K++) = 「ねえ%CALLNAME:MASTER%さん、服を直すの、ちょっと手伝ってくれないかしら？」
			CASE 1
				WSTR:(K++) = 「旅や冒険も嫌いじゃないわ。ふふ、貴方にも出会えたことだし」
				KSTR:(K++) = 「カッコイイとこ、みせてね？」
			CASE 2
				WSTR:(K++) = 「んん……いえね、最近肩が凝るのよ……何か言いたそうね、貴方？」
				KSTR:(K++) = 「でもマッサージしてくれるなら許してあげる。ほら、あそこにちょうどよさそうな――」
			CASE 3
				WSTR:(K++) = 「ちょっと一休みしましょうか？　ずっと働き詰めでしょ？　なら、息抜きしないと」
				KSTR:(K++) = 「ところで、あそこにいい感じに二人きりになれそうな場所があるのだけど……」
			CASE 4
				WSTR:(K++) = 「エスコートをよろしくね」
				KSTR:(K++) = 「眼を離しちゃ、いやよ？」
			CASE 5
				WSTR:(K++) = 「足元に注意、ね。気を使ってくれてありがとう♪」
				KSTR:(K++) = 「でも、何があっても、あなたなら絶対助けてくれるでしょう？　予知に頼らなくてもわかるわ」
		ENDSELECT
	ELSE
		SELECTCASE RAND:6
			CASE 0
				WSTR:(K++) = 「ふふふっ、全ては魔女の予知の通りなのよ」
				KSTR:(K++) = 　マギサは意味ありげに微笑んだ。
			CASE 1
				WSTR:(K++) = 「旅や冒険も嫌いじゃないわ。ふふ、貴方にも出会えたことだし」
				KSTR:(K++) = 「カッコイイとこ、みせてね？」
			CASE 2
				WSTR:(K++) = 「んん……いえね、最近肩が凝るのよ……何か言いたそうね、貴方？」
				KSTR:(K++) = 「でもマッサージしてくれるなら許してあげる。――冗談よ、冗談♪」
			CASE 3
				WSTR:(K++) = 「ねぇ、ちょっと一休みしましょう？」
				KSTR:(K++) = 「ずっと働き詰めなのだから、バチは当たらないはずよ」
			CASE 4
				WSTR:(K++) = 「エスコートをよろしくね」
				KSTR:(K++) = 「眼を離しちゃ、いやよ？」
			CASE 5
				WSTR:(K++) = 「足元に注意、ね。気を使ってくれてありがとう♪」
				KSTR:(K++) = 「……でもそれ、よく考えたらセクハラじゃない？」
		ENDSELECT
	ENDIF
ENDIF
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ,,0)
;--------------------------------------------------
;固有スキル発動時
;「（キャラ名）の（アビ名）！」よりも前に表示される
;汎用アビや衣装アビだと発動しないので注意
;--------------------------------------------------
;イラプション
@KOJO_DUNGEON_固有アビ発動時_38_1(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「全てを失う覚悟は出来てるかしら？」
	DATA 「悪くないでしょう？」
	DATA 「これが魔女の技よ！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;ウォール
@KOJO_DUNGEON_固有アビ発動時_38_2(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「さぁ、楽しみましょう♪」
	DATA 「安心なさい。私が守護ってあげる」
	DATA 「任せて頂戴！」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;ヴァルプルギス
@KOJO_DUNGEON_固有アビ発動時_38_3(対象キャラ, 使用アビ名)
#DIMS 使用アビ名
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「とっておきよ！」
	DATA 「悪いようにはしないわ」
	DATA 「びっくりさせてあげる」
ENDDATA

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;サンクション
@KOJO_DUNGEON_固有アビ発動時_38_4(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「顕現なさい――魔神モラクス！」
	DATA 「後は私に任せて頂戴♪」
	DATA 「驚いて腰抜かしても知らないんだから！」
	DATA 「お願いね、モーさん♪」
ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)

;リベレイション
;「解放」の意。要はモーさんをお帰り願う
@KOJO_DUNGEON_固有アビ発動時_38_5(対象キャラ, 使用アビ名)
#DIM 対象キャラ
#DIMS 使用アビ名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

STRDATA KSTR:(K++)
	DATA 「ありがと、モーさん♪」
	DATA 「お熱いのは如何かしら？」
	DATA 「さて、あとは仕上げよ！」
	DATA 「さぁ、とろけるような魔法を！」
ENDDATA
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;奥義発動時
;「（キャラ名）の奥義：（奥義名）！」よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_奥義発動時_38(対象キャラ, 使用奥義名)
#DIM 対象キャラ
#DIMS 使用奥義名
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
;燃え立つ星が天より墜ちてくる……！
SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「これが魔法の真髄よ！」
	CASE 1
		WSTR:(K++) = 「あなたに未来は訪れないわ……」
	CASE 2
		WSTR:(K++) = 「見せてあげるわ、これが本当の魔法よ！」
	ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
CALL 口上変数初期化
;--------------------------------------------------
;チェンバースト発動時
;「チェインバースト！」（フルチェイン！）よりも前に表示される
;該当キャラが起点になった時（＝ターンで最初に奥義を撃った）にしか呼ばれないので注意
;--------------------------------------------------
@KOJO_DUNGEON_チェンバ発動時_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「さ、行きましょう！」
	CASE 1
		WSTR:(K++) = 「特別にサービスしてあげる！　あっはは！」
	CASE 2
		WSTR:(K++) = 「突然のクライマックス！」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
LOCAL:2 = GETCHARA(37)
IF キャラ隊列検索(LOCAL:2) > -1
	NSTR:(K++) = ++++
	切り替え名前:0 = %CALLNAME:(LOCAL:2)%
	切り替え顔グラリソース:0 = 探索用_{キャラ隊列検索(LOCAL:2)}_顔

	KSTR:(K++) = 「どうやら君にも視えたようだね、マギサ？」

	NSTR:(K++) = ++++
	切り替え名前:1 = %CALLNAME:対象キャラ%
	切り替え顔グラリソース:1 = 探索用_{LOCAL}_顔
	
	KSTR:(K++) = 「そうよ、アルル。これでクライマックスよ！」
ENDIF
;--------------------------------------------------
;トドメ時
;行動の結果（◯◯は倒れた！など）の後に表示される
;複数攻撃時は一人でも倒していれば表示される
;--------------------------------------------------
;口上用トドメフラグ には倒した敵の数が入っている
;口上用技名保存 には奥義名・アビ名が入っている
;       通常攻撃の場合は「通常攻撃」、チェンバの場合は「チェインバースト」が入っている
@KOJO_DUNGEON_トドメ時_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
SELECTCASE RAND:4
	CASE 0
		KSTR:(K++) = 「いい調子ね♪」
	CASE 1
		KSTR:(K++) = 「結末は決まっていたの」
	CASE 2
		KSTR:(K++) = 「ふふふっ、最高に気分がいいわ♪」
	CASE 3
		KSTR:(K++) = 「おとなしくしていなさい」
ENDSELECT

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;味方から回復を受けた時
;「（キャラ名）のＨＰが」の直後に表示される
;複数人回復した場合、ランダムで一人の分が表示される
;--------------------------------------------------
@KOJO_DUNGEON_被回復時_38(対象キャラ)
#DIM 対象キャラ
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

;回復した側のキャラは「BATTLE_STATE:戦闘行動キャラ:キャラ登録番号」でキャラ番号が
;「戦闘行動キャラ」で隊列番号が取れる

KSTR:(K++) = 「ありがとう♪」

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;戦闘勝利時
;ルピやEXPの取得よりも前に表示される
;--------------------------------------------------
@KOJO_DUNGEON_戦闘勝利時_38(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)
IF 陥落チェック_性的(対象キャラ)
		KSTR:(K++) = 「んん……少し熱くなっちゃった_H_」
	ELSE
SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「お疲れ様。後でご褒美をあげるわ♪」
	CASE 1
		KSTR:(K++) = 「物足りない……身体が疼いちゃうわ」
	CASE 2
		KSTR:(K++) = 「流石ね。惚れ惚れしちゃうわ」
ENDSELECT
ENDIF
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)


;--------------------------------------------------
;全滅時
;--------------------------------------------------
@KOJO_DUNGEON_全滅時_38(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「ごめんなさい、%CALLNAME:MASTER%さん……」
ELSE
	SELECTCASE RAND:2
	CASE 0
		KSTR:(K++) = 「うそ……冗談でしょ……？」
	CASE 1
		WSTR:(K++) = 「こんな未来……有り得ない……」
ENDSELECT
ENDIF
CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
;--------------------------------------------------
;逃走時
;--------------------------------------------------
@KOJO_DUNGEON_逃走時_38(対象キャラ)
#DIM 対象キャラ
CALL メッセージ欄表示用関数(,,,0)
CALL 口上変数初期化

LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「モーさん、皆を逃がして！」
ELSE
	SELECTCASE RAND:2
	CASE 0
		KSTR:(K++) = 「ローブがほつれちゃったわぁ……」
	CASE 1
		WSTR:(K++) = 「あらあら、しょうがないわね」
ENDSELECT
ENDIF

CALL メッセージ欄表示用関数(@"探索用_{LOCAL}_顔", CALLNAME:対象キャラ)
CALL 口上変数初期化

;--------------------------------------------------
;全滅リザルト
;--------------------------------------------------
@KOJO_DUNGEON_全滅リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック(対象キャラ)
	KSTR:(K++) = 「まさか……こんな……情けない……！」
ELSE
	KSTR:(K++) = 「これは完敗ね……」
ENDIF
;--------------------------------------------------
;ボス撃破でクリア
;--------------------------------------------------
@KOJO_DUNGEON_討伐達成リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック_性的(対象キャラ)
	KSTR:(K++) = 「さぁ、二人の時間に戻りましょ_H_」
ELSE
	KSTR:(K++) = 「当然の結末よ！」
ENDIF
;--------------------------------------------------
;ダンジョン踏破でクリア
;--------------------------------------------------
@KOJO_DUNGEON_踏破達成リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

IF 陥落チェック_性的(対象キャラ)
	KSTR:(K++) = 「%CALLNAME:MASTER%さん……『ご褒美』お願いね♪」
ELSE
	KSTR:(K++) = 「皆、頑張ったわね。ふふふっ♪」
ENDIF
;--------------------------------------------------
;ダンジョンから抜けるで終了
;--------------------------------------------------
@KOJO_DUNGEON_撤退リザルト_38(対象キャラ)
#DIM 対象キャラ
LOCAL = キャラ隊列検索(対象キャラ)

SELECTCASE RAND:3
	CASE 0
		KSTR:(K++) = 「あら、もう帰っちゃうの？」
	CASE 1
		KSTR:(K++) = 「お疲れ様。薬湯でも出してあげるわ」
	CASE 1
		KSTR:(K++) = 「時間も時間だし、引き揚げましょうか」
ENDSELECT
