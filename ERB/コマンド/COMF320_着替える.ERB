;-------------------------------------------------
;着替える
;-------------------------------------------------
@COMNAME334
#FUNCTIONS
TSTR:コマンド名受渡 = 着替える


;===================================================
;コマンドタイプ
;===================================================
@COMTYPE_334
#FUNCTION
TFLAG:コマンドタイプ受渡 = COMTYPE("単独可能")

@COM_TOOLTIP_334
LOCALS = <br>■着替える<br>
LOCALS += "自室で別の服に着替えるコマンド。自身の制服・現在の衣装を変更出来る。"
LOCALS += "<br>COMタイプ：単独可能<br>取得ソース：なし"
LOCALS += "<br>固有の取得経験：なし<br>"
TSTR:ツールチップ受渡 = %LOCALS%

@COM334

CALL コスプレ実処理(PLAYER)
IF RSTR:コマンド結果受渡し文字列 != "元の衣装"
	現在制服:PLAYER:0 '= RSTR:コマンド結果受渡し文字列
ELSE
	現在制服:PLAYER:0 = 
ENDIF
RETURN RESULT

;-------------------------------------------------
;実行判定
;-------------------------------------------------

@COM_ABLE334
;全部脱衣
SIF SAVESTR:ゲームフェイズ管理 != "通常モード"
	RETURN 0
;一括管理
SIF GLOBAL_COMABLE(334)
	RETURN RESULT


RETURN 1


;-------------------------------------------------
;実行時メッセージ
;-------------------------------------------------
@MESSAGE_COM334
#DIM 同時キャラ番号

PRINTFORML %CALLNAME:PLAYER%は%RSTR:コマンド結果受渡し文字列%に着替えた。

;画像表示、元の衣装以外の時に表示
IF RSTR:コマンド結果受渡し文字列 != "元の衣装"
	IF EXIST画像FILE(@"resources/%CSTR:PLAYER:画像フォルダ%/短冊_%RSTR:コマンド結果受渡し文字列%")
		CALL PRINT_STRL(@"IMAGEPATH_%CSTR:PLAYER:画像フォルダ%/短冊_%RSTR:コマンド結果受渡し文字列%")
	ENDIF
ENDIF

